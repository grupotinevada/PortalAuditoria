<!-- Fondo -->
<div *ngIf="mostrarModal" class="modal-backdrop fade show"></div>

<!-- Modal principal -->
<div
  *ngIf="mostrarModal"
  class="modal fade show d-block"
  tabindex="-1"
  role="dialog"
  aria-modal="true"
  style="padding-right: 15px; background-color: rgba(0, 0, 0, 0.5)"
>
  <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
    <div class="modal-content p-3">
      <!-- Encabezado -->
      <div class="modal-header d-flex justify-content-between align-items-center flex-wrap">
        <div class="d-flex flex-column">
          <h5 class="modal-title mb-0">Crear Nuevo Usuario</h5>
          <small class="text-danger">Debe completar todos los campos</small>
        </div>
        <button type="button" class="btn-close ms-2" (click)="cerrarModal()" aria-label="Close"></button>
      </div>

      
<!-- Cuerpo -->
<div class="modal-body">
    <label for="filtroUsuario" class="form-label">Buscar usuario del tenant</label>
    <div class="input-group mb-2">
        <span class="input-group-text dark-input">üîç</span>
        <input 
          type="text"
          class="form-control dark-input"
          placeholder="Filtrar usuarios..."
          [(ngModel)]="filtroUsuario"
        >
      </div>
      
      <select 
        class="form-select dark-input"
        [(ngModel)]="selectedUserId"
        (change)="onSelectUser()"
      >
        <option 
          *ngFor="let user of usuariosFiltrados()" 
          [value]="user.id">
          {{ user.displayName }} - {{ user.mail || user.userPrincipalName || 'Sin email' }}
        </option>
      </select>
  
    <div class="modal-footer justify-content-between">
      <button type="button" class="btn btn-danger" (click)="cerrarModal()">Cancelar</button>
      <button type="button" class="btn btn-primary" (click)="guardarUsuario()">Guardar</button>
    </div>
  </div>
  

  <!-- Spinner opcional -->
  <div *ngIf="isLoading" class="position-fixed top-0 start-0 w-100 h-100 d-flex justify-content-center align-items-center"
    style="z-index: 2000; background-color: rgba(255, 255, 255, 0.5)">
    <app-spinner [loading]="true"></app-spinner>
  </div>
</div>
